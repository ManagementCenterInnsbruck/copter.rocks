/*******************************************************************************
**                      Author(s) Identity                                    **
********************************************************************************
**                                                                            **
** Initials     Name                                                          **
** ---------------------------------------------------------------------------**
** RT           Rafael  Tschinder                                             **
** DW           Dominik Wieland                                               **
**                                                                            **
**                                                                            **
*******************************************************************************/

/*******************************************************************************
**                      Revision Control History                              **
*******************************************************************************/
/*
 * V0.0: 16-03-2016, RT:  Initial Version
 * V0.1: 21-07-2016, DW:  Port of SW from DAVE3 to DAVE4
 */


/*******************************************************************************
**                      Includes                                              **
*******************************************************************************/
#include <DAVE.h>
#include "../_HAL/GPIO.h"

/*******************************************************************************
**                      Private Constant Definitions to be changed            **
*******************************************************************************/

#define Battery_State1	3724    /**< ADC result corresponding to a Battery Voltage of 12V */

#define Battery_State2	3413    /**< ADC result corresponding to a Battery Voltage of 11V */

#define Battery_State3	3258  /**< ADC result corresponding to a Battery Voltage of 10.5V */

/*******************************************************************************
**                      Private Macro Definitions                             **
*******************************************************************************/

/*******************************************************************************
**                      Global Type Definitions                               **
*******************************************************************************/

/*******************************************************************************
**                      Private Type Definitions                              **
*******************************************************************************/

/*******************************************************************************
**                      Global Function Declarations                          **
*******************************************************************************/

/*******************************************************************************
**                      Private Function Declarations                         **
*******************************************************************************/
void VBat_Measurement_ISR(void);

/*******************************************************************************
**                      Global Constant Definitions                           **
*******************************************************************************/

/*******************************************************************************
**                      Private Constant Definitions                          **
*******************************************************************************/

/*******************************************************************************
**                      Global Variable Definitions                           **
*******************************************************************************/

/*******************************************************************************
**                      Private Variable Definitions                          **
*******************************************************************************/

/*******************************************************************************
**                      Global Function Definitions                           **
*******************************************************************************/

/*******************************************************************************
**                      Private Function Definitions                          **
*******************************************************************************/

/*
 * All LEDs on -> Battery Voltage > 12V
 * Yellow and Red LED on -> Battery Voltage 12V - 11V
 * Red LED on -> Battery Voltage 11V - 10.5V
 * Red LED flashing -> Battery Voltage < 10.5V
 * The VBat Pin has to be connected to the right Pin of the Bat Safety Connector, and R13 must be min. 30kOhm and C29(10uF) has to be mounted.
 */
